-- LeetCode #70: Climbing Stairs
-- Fold with list accumulator [prev curr]

#fn stair_step :[i32] acc:[i32] unused:i32
  v0 :i32 = call get acc 0
  v1 :i32 = call get acc 1
  v2 :i32 = + v0 v1
  = [v1 v2]

#fn climb_stairs :i32 n:i32
  v0 :bool = <= n 1
  v1 :i32 = - n 1
  v2 :[i32] = call range 0 v1
  v3 :[i32] = fold v2 [1 1] stair_step
  v4 :i32 = call get v3 1
  v5 :i32 = select v0 1 v4
  = v5

#test stairs_1
  assert == (call climb_stairs 1) 1

#test stairs_2
  assert == (call climb_stairs 2) 2

#test stairs_3
  assert == (call climb_stairs 3) 3

#test stairs_5
  assert == (call climb_stairs 5) 8

#test stairs_10
  assert == (call climb_stairs 10) 89

#entry
  v0 :[i32] = call range 1 11
  v1 :[i32] = map climb_stairs v0
  log "info" "Climbing stairs 1..10: {0}" v1
  = 0
